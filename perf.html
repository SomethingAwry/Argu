<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Performance Tips
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Eirik Tsarpalis">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->

    <link type="text/css" rel="stylesheet" href="https://fsprojects.github.io/Argu/content/navbar-fixed-right.css" />
    <link type="text/css" rel="stylesheet" href="https://fsprojects.github.io/Argu/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="https://fsprojects.github.io/Argu/content/fsdocs-custom.css" />
    <script type="text/javascript" src="https://fsprojects.github.io/Argu/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->

</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-right" id="fsdocs-menu">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <a href="https://fsprojects.github.io/Argu/"><img id="fsdocs-logo" src="https://fsprojects.github.io/Argu/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/fsprojects/Argu/blob/master/LICENSE.md">License (Apache 2.0)</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/fsprojects/Argu/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/fsprojects/Argu/">Source Repository</a></li>
                <li class="nav-header">
  Documentation
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/Argu/perf.html">
    Performance Tips

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/Argu/tutorial.html">
    Tutorial

  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/Argu/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="https://fsprojects.github.io/Argu/">Argu</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            <h1><a name="Performance-Tips" class="anchor" href="#Performance-Tips">Performance Tips</a></h1>
<h2><a name="Introduction" class="anchor" href="#Introduction">Introduction</a></h2>
<p>Argu simplicity is achieved via Reflection and as such it's performance heavily depend on the size and depth of the
discriminated union used.</p>
<p>For applications that wants to get a little more performance out of Argu it's also possible to get a little more
performance.</p>
<h2><a name="Bypassing-structure-checks" class="anchor" href="#Bypassing-structure-checks">Bypassing structure checks</a></h2>
<p>By default Argu checks that the discriminated union is well formed and only contains entries that are valid.
This incur both the cost of the checks themselves but also the cost of materializing the whole argument graph that could
be loaded only if the corresponding arguments are used.</p>
<p>This check can easilly be bypassed either only in release builds :</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="id">checkStructure</span> <span class="o">=</span>
<span class="pp">#if</span> <span class="id">DEBUG</span>
<span class="inactive">    </span><span class="inactive">true</span>
<span class="pp">#else</span>
    <span class="k">false</span>
<span class="pp">#endif</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="id">parser</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="rt">ArgumentParser</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs10', 10)" onmouseover="showTip(event, 'fs10', 10)" class="id">Create</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs11', 11)" onmouseover="showTip(event, 'fs11', 11)" class="rt">Arguments</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs7', 12)" onmouseover="showTip(event, 'fs7', 12)" class="id">checkStructure</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 13)" onmouseover="showTip(event, 'fs7', 13)" class="id">checkStructure</span><span class="pn">)</span>
</code></pre>
<p>Or always, forcing the check to happen during unit tests:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// In the application</span>
<span class="k">module</span> <span class="m">AppArgs</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 14)" onmouseover="showTip(event, 'fs8', 14)" class="id">parser</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 15)" onmouseover="showTip(event, 'fs9', 15)" class="rt">ArgumentParser</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs10', 16)" onmouseover="showTip(event, 'fs10', 16)" class="id">Create</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs11', 17)" onmouseover="showTip(event, 'fs11', 17)" class="rt">Arguments</span><span class="pn">&gt;</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs7', 18)" onmouseover="showTip(event, 'fs7', 18)" class="id">checkStructure</span> <span class="o">=</span> <span class="k">false</span><span class="pn">)</span>

<span class="c">// In tests</span>
<span class="pn">[&lt;</span><span onmouseout="hideTip(event, 'fs4', 19)" onmouseover="showTip(event, 'fs4', 19)" class="rt">Fact</span><span class="pn">&gt;]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 20)" onmouseover="showTip(event, 'fs12', 20)" class="fn">``Argument structure is correct``</span> <span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs9', 21)" onmouseover="showTip(event, 'fs9', 21)" class="rt">ArgumentParser</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs11', 22)" onmouseover="showTip(event, 'fs11', 22)" class="rt">Arguments</span><span class="pn">&gt;</span><span class="pn">.</span><span class="id">CheckStructure</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>

            <div class="fsdocs-tip" id="fs1">namespace Argu</div>
<div class="fsdocs-tip" id="fs2">union case Arguments.Argument: Arguments</div>
<div class="fsdocs-tip" id="fs3">type IArgParserTemplate =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Usage : string<br />&#160;&#160;end</div>
<div class="fsdocs-tip" id="fs4">Multiple items<br />type FactAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; FactAttribute<br /><br />--------------------<br />new : unit -&gt; FactAttribute</div>
<div class="fsdocs-tip" id="fs5">namespace System</div>
<div class="fsdocs-tip" id="fs6">Multiple items<br />type Attribute =<br />&#160;&#160;member Equals : obj:obj -&gt; bool<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member IsDefaultAttribute : unit -&gt; bool<br />&#160;&#160;member Match : obj:obj -&gt; bool<br />&#160;&#160;member TypeId : obj<br />&#160;&#160;static member GetCustomAttribute : element:MemberInfo * attributeType:Type -&gt; Attribute + 7 overloads<br />&#160;&#160;static member GetCustomAttributes : element:MemberInfo -&gt; Attribute[] + 15 overloads<br />&#160;&#160;static member IsDefined : element:MemberInfo * attributeType:Type -&gt; bool + 7 overloads<br /><br />--------------------<br />System.Attribute() : System.Attribute</div>
<div class="fsdocs-tip" id="fs7">val checkStructure : bool</div>
<div class="fsdocs-tip" id="fs8">val parser : ArgumentParser&lt;Arguments&gt;</div>
<div class="fsdocs-tip" id="fs9">Multiple items<br />type ArgumentParser =<br />&#160;&#160;private new : argInfo:UnionArgInfo * _programName:string * helpTextMessage:string option * _usageStringCharacterWidth:int * errorHandler:IExiter -&gt; ArgumentParser<br />&#160;&#160;abstract member Accept : visitor:IArgumentParserVisitor&lt;&#39;R&gt; -&gt; &#39;R<br />&#160;&#160;member GetArgumentCases : unit -&gt; ArgumentCaseInfo list<br />&#160;&#160;member GetSubCommandParsers : unit -&gt; ArgumentParser list<br />&#160;&#160;member PrintCommandLineSyntax : ?programName:string * ?usageStringCharacterWidth:int -&gt; string<br />&#160;&#160;member PrintUsage : ?message:string * ?programName:string * ?hideSyntax:bool * ?usageStringCharacterWidth:int -&gt; string<br />&#160;&#160;member ErrorHandler : IExiter<br />&#160;&#160;member HelpDescription : string<br />&#160;&#160;member HelpFlags : string list<br />&#160;&#160;member HelpTextMessage : string option<br />&#160;&#160;...<br /><br />--------------------<br />type ArgumentParser&lt;&#39;Template (requires &#39;Template :&gt; IArgParserTemplate)&gt; =<br />&#160;&#160;inherit ArgumentParser<br />&#160;&#160;new : ?programName:string * ?helpTextMessage:string * ?usageStringCharacterWidth:int * ?errorHandler:IExiter * ?checkStructure:bool -&gt; ArgumentParser&lt;&#39;Template&gt;<br />&#160;&#160;private new : argInfo:UnionArgInfo * _programName:string * helpTextMessage:string option * _usageStringCharacterWidth:int * errorHandler:IExiter -&gt; ArgumentParser&lt;&#39;Template&gt;<br />&#160;&#160;override Accept : visitor:IArgumentParserVisitor&lt;&#39;a1&gt; -&gt; &#39;a1<br />&#160;&#160;member GetArgumentCaseInfo : ctorExpr:Expr&lt;(&#39;Fields -&gt; &#39;Template)&gt; -&gt; ArgumentCaseInfo<br />&#160;&#160;member GetArgumentCaseInfo : value:&#39;Template -&gt; ArgumentCaseInfo<br />&#160;&#160;member GetSubCommandParser : expr:Expr&lt;(ParseResults&lt;&#39;SubTemplate&gt; -&gt; &#39;Template)&gt; -&gt; ArgumentParser&lt;&#39;SubTemplate&gt; (requires &#39;SubTemplate :&gt; IArgParserTemplate)<br />&#160;&#160;member GetTag : value:&#39;Template -&gt; int<br />&#160;&#160;member Parse : ?inputs:string [] * ?configurationReader:IConfigurationReader * ?ignoreMissing:bool * ?ignoreUnrecognized:bool * ?raiseOnUsage:bool -&gt; ParseResults&lt;&#39;Template&gt;<br />&#160;&#160;member ParseCommandLine : ?inputs:string [] * ?ignoreMissing:bool * ?ignoreUnrecognized:bool * ?raiseOnUsage:bool -&gt; ParseResults&lt;&#39;Template&gt;<br />&#160;&#160;...<br /><br />--------------------<br />new : ?programName:string * ?helpTextMessage:string * ?usageStringCharacterWidth:int * ?errorHandler:IExiter * ?checkStructure:bool -&gt; ArgumentParser&lt;&#39;Template&gt;</div>
<div class="fsdocs-tip" id="fs10">static member ArgumentParser.Create : ?programName:string * ?helpTextMessage:string * ?usageStringCharacterWidth:int * ?errorHandler:IExiter * ?checkStructure:bool -&gt; ArgumentParser&lt;#IArgParserTemplate&gt;</div>
<div class="fsdocs-tip" id="fs11">type Arguments =<br />&#160;&#160;| Argument<br />&#160;&#160;&#160;&#160;interface IArgParserTemplate</div>
<div class="fsdocs-tip" id="fs12">val ( Argument structure is correct ) : unit -&gt; unit</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = 'https://fsprojects.github.io/Argu/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="https://fsprojects.github.io/Argu/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>
